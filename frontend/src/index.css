@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
    overflow-x: hidden;
    overscroll-behavior-x: none;
    touch-action: pan-y pinch-zoom;
    position: relative;
    width: 100%;
    height: 100%;
  }
  
  body {
    @apply bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100;
    transition: background-color 0.3s ease, color 0.3s ease;
    overflow-x: hidden;
    overscroll-behavior: none;
    touch-action: pan-y pinch-zoom;
    position: relative;
    width: 100%;
    min-height: 100vh;
  }
  
  #root {
    overflow-x: hidden;
    overscroll-behavior-x: none;
    touch-action: pan-y pinch-zoom;
    position: relative;
    width: 100%;
    min-height: 100vh;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-secondary {
    @apply bg-secondary-500 hover:bg-secondary-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .btn-outline {
    @apply border border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .card {
    @apply bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-all duration-300;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200;
  }
  
  .label {
    @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1;
  }
}

/* Animations personnalisées */
@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.3s ease-in;
  }
  
  .animate-slide-up {
    animation: slideUp 0.3s ease-out;
  }
  
  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Masquer la scrollbar mais garder le scroll */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}

/* Amélioration du wrapping du texte pour les messages */
.overflow-wrap-anywhere {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Prévenir le déplacement non désiré sur mobile et desktop */
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* Empêcher le zoom sur focus pour les inputs sur iOS */
input[type="text"],
input[type="email"],
input[type="tel"],
textarea {
  font-size: 16px;
}

/* Empêcher le défilement horizontal accidentel */
html, body {
  overflow-x: hidden !important;
  position: relative;
  width: 100%;
  max-width: 100vw;
}

/* Améliorer la stabilité des éléments fixes */
.fixed,
.absolute {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  touch-action: pan-y pinch-zoom;
}

/* Conteneurs principaux - empêcher le déplacement */
.min-h-screen {
  overflow-x: hidden;
  overscroll-behavior-x: none;
  touch-action: pan-y pinch-zoom;
  position: relative;
  width: 100%;
  max-width: 100vw;
}

/* Empêcher le glissement horizontal sur les conteneurs principaux uniquement */
.min-h-screen,
.max-w-7xl {
  touch-action: pan-y pinch-zoom;
}

/* Zones de scroll vertical uniquement */
.overflow-y-auto,
.overflow-y-scroll {
  touch-action: pan-y;
  overscroll-behavior-y: contain;
  overscroll-behavior-x: none;
}

/* Navigation tabs - permettre le scroll horizontal uniquement pour les tabs */
nav {
  touch-action: pan-x pan-y;
  overscroll-behavior-x: none;
}

/* Classe utilitaire pour empêcher tout déplacement */
.prevent-swipe {
  touch-action: none;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
}

/* Empêcher le pull-to-refresh sur mobile */
@supports (-webkit-overflow-scrolling: touch) {
  body {
    overscroll-behavior-y: none;
  }
}

/* Améliorer la performance du scroll sur mobile */
@media (max-width: 768px) {
  .overflow-y-auto,
  .overflow-y-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
    overscroll-behavior-x: none;
    touch-action: pan-y;
  }
  
  /* Empêcher le pull-to-refresh et autres gestes */
  body {
    overscroll-behavior-y: none;
    overscroll-behavior-x: none;
  }
}

/* Classe spécifique pour le scroll du chatbot - APPROCHE RADICALE */
.chatbot-scroll-area,
.chatbot-scroll-area * {
  -webkit-overflow-scrolling: touch !important;
  overscroll-behavior: contain !important;
}

/* Media query spécifique pour mobile - FORCER LE SCROLL */
@media (max-width: 640px) {
  /* Conteneur principal du chatbot - permettre le scroll vertical */
  .chatbot-container {
    touch-action: pan-y !important;
    overflow: visible !important;
  }
  
  /* Zones de scroll dans le portail - FORCER LE SCROLL */
  body > div[style*="fixed"] > div[style*="overflow-y-scroll"],
  body > div[style*="fixed"] div[class*="overflow-y-scroll"] {
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
    overscroll-behavior-x: none !important;
    overflow-y: scroll !important;
    position: relative !important;
    will-change: scroll-position !important;
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
    height: 100% !important;
    max-height: 100% !important;
  }
  
  /* Zones de scroll normales */
  .chatbot-scroll-area,
  div[style*="overflow-y-scroll"],
  div[style*="overflow-y-auto"] {
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain !important;
    overscroll-behavior-x: none !important;
    overflow-y: scroll !important;
    position: relative !important;
    will-change: scroll-position !important;
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
  }
  
  /* Empêcher le body de scroller quand le sidebar est ouvert */
  body.chatbot-open {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
  }
}


